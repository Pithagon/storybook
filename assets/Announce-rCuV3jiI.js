import{d as j,r as f,j as we}from"./iframe-Cfz2vXeE.js";const p={Less:"less",Equal:"equal",Greater:"greater"};var oe=t=>{throw TypeError(t)},ee=(t,e,n)=>e.has(t)||oe("Cannot "+n),a=(t,e,n)=>(ee(t,e,"read from private field"),n?n.call(t):e.get(t)),J=(t,e,n)=>e.has(t)?oe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),K=(t,e,n,i)=>(ee(t,e,"write to private field"),e.set(t,n),n),Q=(t,e,n)=>(ee(t,e,"access private method"),n),T,r,$,Z,le;class Ce{constructor({compareFn:e}){J(this,$),J(this,T),J(this,r),K(this,T,e),K(this,r,[])}insert(e){a(this,r).push(e),Q(this,$,le).call(this)}pop(){const e=a(this,r)[0];return a(this,r)[a(this,r).length-1]&&(a(this,r)[0]=a(this,r)[a(this,r).length-1],a(this,r).pop()),Q(this,$,Z).call(this),e}peek(){return a(this,r)[0]}delete(e){const n=a(this,r).indexOf(e);n!==-1&&(ie(a(this,r),n,a(this,r).length-1),a(this,r).pop(),Q(this,$,Z).call(this))}clear(){K(this,r,[])}get size(){return a(this,r).length}}T=new WeakMap;r=new WeakMap;$=new WeakSet;Z=function(){let t=0;for(;Ee(t,a(this,r).length);){let e=te(t);if(ye(t,a(this,r).length)&&a(this,T).call(this,Re(a(this,r),t),Te(a(this,r),t))===p.Less&&(e=ne(t)),a(this,T).call(this,a(this,r)[t],a(this,r)[e])===p.Less)break;ie(a(this,r),t,e),t=e}};le=function(){let t=a(this,r).length-1;for(;xe(t)&&a(this,T).call(this,a(this,r)[t],Me(a(this,r),t))===p.Less;)ie(a(this,r),t,b(t)),t=b(t)};function te(t){return 2*t+1}function ne(t){return 2*t+2}function b(t){return Math.floor((t-1)/2)}function Ee(t,e){return te(t)<e}function ye(t,e){return ne(t)<e}function xe(t){return t>0}function Te(t,e){return t[te(e)]}function Re(t,e){return t[ne(e)]}function Me(t,e){return t[b(e)]}function ie(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}var Se=Object.defineProperty,ce=t=>{throw TypeError(t)},Ae=(t,e,n)=>e in t?Se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Le=(t,e,n)=>Ae(t,typeof e!="symbol"?e+"":e,n),ue=(t,e,n)=>e.has(t)||ce("Cannot "+n),E=(t,e,n)=>(ue(t,e,"read from private field"),n?n.call(t):e.get(t)),V=(t,e,n)=>e.has(t)?ce("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),X=(t,e,n,i)=>(ue(t,e,"write to private field"),e.set(t,n),n),he,C,G,H;he=Symbol.toStringTag;class $e{constructor(){Le(this,he,"Deferred"),V(this,C),V(this,G),V(this,H),X(this,C,new Promise((e,n)=>{X(this,G,e),X(this,H,n)}))}then(e,n){return Promise.prototype.then.apply(E(this,C),[e,n])}catch(e){return Promise.prototype.catch.apply(E(this,C),[e])}finally(e){return Promise.prototype.finally.apply(E(this,C),[e])}resolve(e){E(this,G).call(this,e)}reject(e){E(this,H).call(this,e)}getPromise(){return E(this,C)}}C=new WeakMap;G=new WeakMap;H=new WeakMap;var de=t=>{throw TypeError(t)},se=(t,e,n)=>e.has(t)||de("Cannot "+n),h=(t,e,n)=>(se(t,e,"read from private field"),n?n.call(t):e.get(t)),q=(t,e,n)=>e.has(t)?de("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),u=(t,e,n,i)=>(se(t,e,"write to private field"),e.set(t,n),n),y=(t,e,n)=>(se(t,e,"access private method"),n),v,m,c,_,x,fe;const ke=150;class pe extends HTMLElement{constructor(){if(super(),q(this,_),q(this,v),q(this,m),q(this,c),!this.shadowRoot){const e=Ie();this.attachShadow({mode:"open"}).appendChild(e.content.cloneNode(!0))}u(this,v,!1),u(this,c,null),u(this,m,new Ce({compareFn:De}))}get delay(){const e=this.getAttribute("delay");return e?parseInt(e,10):ke}set delay(e){this.setAttribute("delay",`${e}`)}announce(e,n={}){const{delayMs:i,politeness:s="polite"}=n,o=Date.now(),l=new $e,d={deferred:l,politeness:s,contents:e,scheduled:i!==void 0?o+i:o};return h(this,m).insert(d),y(this,_,x).call(this),{...l.getPromise(),cancel:()=>{h(this,m).delete(d),l.resolve()}}}announceFromElement(e,n){const i=We(e);return i!==""?this.announce(i,n):{...Promise.resolve(),cancel:Fe}}getMessage(e="polite"){const n=this.shadowRoot?.getElementById(e);if(!n)throw new Error("Unable to find container for message");return n.textContent}clear(){h(this,c)!==null&&(clearTimeout(h(this,c)),u(this,c,null)),u(this,v,!1),h(this,m).clear()}}v=new WeakMap;m=new WeakMap;c=new WeakMap;_=new WeakSet;x=function(){if(h(this,v))return;let t=h(this,m).peek();if(!t)return;h(this,c)!==null&&(clearTimeout(h(this,c)),u(this,c,null));const e=Date.now();if(t.scheduled<=e){t=h(this,m).pop(),t&&y(this,_,fe).call(this,t),y(this,_,x).call(this);return}const n=t.scheduled-e;u(this,c,window.setTimeout(()=>{u(this,c,null),y(this,_,x).call(this)},n))};fe=function(t){u(this,v,!0);const{contents:e,deferred:n,politeness:i}=t,s=this.shadowRoot?.getElementById(i);if(!s)throw u(this,v,!1),new Error(`Unable to find container for message. Expected a container with id="${i}"`);s.textContent===e?s.textContent=`${e}Â `:s.textContent=e,h(this,c)!==null&&clearTimeout(h(this,c)),n.resolve(),this.delay>0?u(this,c,window.setTimeout(()=>{u(this,c,null),u(this,v,!1),y(this,_,x).call(this)},this.delay)):(u(this,c,null),u(this,v,!1),y(this,_,x).call(this))};function We(t){let e="";return t.hasAttribute("aria-label")?e=t.getAttribute("aria-label"):t.innerText?e=t.innerText:t.textContent&&(e=t.textContent),e?e.trim():""}let L=null;const Pe=`
<style>
:host {
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}
</style>
<div id="polite" aria-live="polite" aria-atomic="true"></div>
<div id="assertive" aria-live="assertive" aria-atomic="true"></div>
`;function Ie(){return L||(L=document.createElement("template"),L.innerHTML=Pe,L)}function De(t,e){return t.politeness===e.politeness?t.scheduled===e.scheduled?p.Equal:t.scheduled<e.scheduled?p.Less:p.Greater:t.politeness==="assertive"&&e.politeness!=="assertive"?p.Less:t.politeness!=="assertive"&&e.politeness==="assertive"?p.Greater:p.Equal}function Fe(){}customElements.get("live-region")||customElements.define("live-region",pe);function ze(t,e={}){let n=ve(e.from);if(!n){n=document.createElement("live-region"),e.appendTo?e.appendTo.appendChild(n):re(e.from).appendChild(n);let i=!1,s=()=>{i=!0};return{..._e(me).then(()=>{if(!i){const l=n.announce(t,e);return s=l.cancel,l}}),cancel:()=>{s()}}}return n.announce(t,e)}function Oe(t,e={}){let n=ve(e.from);if(!n){n=document.createElement("live-region"),e.appendTo?e.appendTo.appendChild(n):re(e.from).appendChild(n);let i=!1,s=()=>{i=!0};return{..._e(me).then(()=>{if(!i){const l=n.announceFromElement(t,e);return s=l.cancel,l}}),cancel:()=>{s()}}}return n.announceFromElement(t,e)}function ve(t){let e=null;return e=t?qe(t):null,e!==null||(e=re(t).querySelector("live-region"),e!==null)?e:null}function qe(t){const e=t.closest("dialog");let n=t;for(;(n=n.parentElement)&&!(e&&!e.contains(n));)for(const i of n.childNodes)if(i instanceof pe)return i;return null}function re(t){let e=document.body;if(t){const n=t.closest("dialog");n&&(e=n)}return e}const me=150;function _e(t){return new Promise(e=>{setTimeout(e,t)})}function Ge(t){const e=j.c(2),n=f.useRef(t),i=f.useRef(!1);let s,o;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{i.current!==!0&&(i.current=!0,n.current())},o=[],e[0]=s,e[1]=o):(s=e[0],o=e[1]),f.useEffect(s,o)}function He(t){const e=j.c(4),n=f.useRef(t);let i,s;e[0]!==t?(i=()=>{n.current=t},s=[t],e[0]=t,e[1]=i,e[2]=s):(i=e[1],s=e[2]),f.useEffect(i,s);let o;return e[3]===Symbol.for("react.memo_cache_sentinel")?(o=(...l)=>{const d=l;return n.current(...d)},e[3]=o):o=e[3],o}function Ne(t){const e=j.c(25);let n,i,s,o,l,d,R;e[0]!==t?({as:o,announceOnShow:l,children:n,delayMs:i,hidden:d,politeness:R,...s}=t,e[0]=t,e[1]=n,e[2]=i,e[3]=s,e[4]=o,e[5]=l,e[6]=d,e[7]=R):(n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],d=e[6],R=e[7]);const N=o===void 0?"div":o,U=l===void 0?!0:l,B=d===void 0?!1:d,M=R===void 0?"polite":R,z=f.useRef(null),[Y,ge]=f.useState(null),S=f.useRef(null);let k;e[8]!==i||e[9]!==B||e[10]!==M||e[11]!==Y?(k=()=>{const{current:w}=z;if(!w||B)return;const A=window.getComputedStyle(w);if(A.display==="none"||A.visibility==="hidden")return;const ae=Ue(w);ae!==Y&&(S.current?.cancel(),S.current=Oe(w,M==="assertive"?{politeness:M}:{politeness:M,delayMs:i}),ge(ae))},e[8]=i,e[9]=B,e[10]=M,e[11]=Y,e[12]=k):k=e[12];const g=He(k);let W;e[13]!==g||e[14]!==U?(W=()=>{U&&g()},e[13]=g,e[14]=U,e[15]=W):W=e[15],Ge(W);let P,I;e[16]!==g?(P=()=>{const{current:w}=z;if(w===null)return;const A=new MutationObserver(()=>{g()});return A.observe(w,{subtree:!0,childList:!0,characterData:!0}),()=>{A.disconnect()}},I=[g],e[16]=g,e[17]=P,e[18]=I):(P=e[17],I=e[18]),f.useEffect(P,I);let D,F;e[19]===Symbol.for("react.memo_cache_sentinel")?(D=()=>()=>{S.current!==null&&(S.current.cancel(),S.current=null)},F=[],e[19]=D,e[20]=F):(D=e[19],F=e[20]),f.useEffect(D,F);let O;return e[21]!==N||e[22]!==n||e[23]!==s?(O=we.jsx(N,{...s,ref:z,children:n}),e[21]=N,e[22]=n,e[23]=s,e[24]=O):O=e[24],O}function Ue(t){let e="";return t.hasAttribute("aria-label")?e=t.getAttribute("aria-label"):t.textContent&&(e=t.textContent),e?e.trim():""}Ne.__docgenInfo={description:"`Announce` is a component that will announce the text content of the\n`children` passed in to screen readers using the given politeness level. It\nwill also announce any changes to the text content of `children`",methods:[],displayName:"Announce",props:{as:{required:!1,tsType:{name:"TAs"},description:""}}};export{Ne as A,ze as a,Oe as b};
