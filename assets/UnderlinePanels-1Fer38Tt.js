import{r as d,u as oe,R as F,j as k,c as le,d as J}from"./iframe-Cfz2vXeE.js";import{c as ce}from"./create-component-3GntSW2q.js";import{U as be,a as de,b as ue}from"./UnderlineTabbedInterface-B-g35VdW.js";import{i as B}from"./invariant-Dix8OlSS.js";import{u as he}from"./useResizeObserver-CkcKl7_1.js";import{u as pe}from"./useIsomorphicLayoutEffect-C_Bsqbyc.js";var w=function(n,e,t,a,s){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},r=function(n,e,t,a){if(t==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?a:t==="a"?a.call(n):a?a.value:e.get(n)},fe=function(n,e){var t={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(t[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(n);s<a.length;s++)e.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(n,a[s])&&(t[a[s]]=n[a[s]]);return t},$,q,L,W,i,E,v,A,Q,R,X,Y,Z,O,K,x,T,_,ee,te,D;const ae=globalThis.HTMLElement||null,C="assign"in((($=globalThis.HTMLSlotElement)===null||$===void 0?void 0:$.prototype)||{})?(n,...e)=>{n.assign(...e)}:(n,...e)=>{const t=n.getRootNode().host;for(const a of t.querySelectorAll(`[slot="${n.name}"]`))a.removeAttribute("slot");for(const a of e)a.setAttribute("slot",n.name)};class z extends Event{constructor(e,t){var{tabIndex:a,tab:s,panel:c}=t,o=fe(t,["tabIndex","tab","panel"]);super(e,o),q.set(this,null),L.set(this,null),W.set(this,null),w(this,W,s||null,"f"),w(this,q,a||null,"f"),w(this,L,c||null,"f")}get detail(){return console.warn("TabContainerElement.detail is deprecated, please use .panel instead"),{relatedTarget:r(this,L,"f")}}get tabIndex(){return r(this,q,"f")}get panel(){return r(this,L,"f")}get tab(){return r(this,W,"f")}}q=new WeakMap,L=new WeakMap,W=new WeakMap;class H extends ae{constructor(){super(...arguments),i.add(this),E.set(this,null),v.set(this,null),T.set(this,!1),_.set(this,void 0)}static define(e="tab-container",t=customElements){return t.define(e,this),this}get onChange(){return this.onTabContainerChange}set onChange(e){this.onTabContainerChange=e}get onTabContainerChange(){return r(this,E,"f")}set onTabContainerChange(e){r(this,E,"f")&&this.removeEventListener("tab-container-change",r(this,E,"f")),w(this,E,typeof e=="object"||typeof e=="function"?e:null,"f"),typeof e=="function"&&this.addEventListener("tab-container-change",e)}get onTabContainerChanged(){return r(this,v,"f")}set onTabContainerChanged(e){r(this,v,"f")&&this.removeEventListener("tab-container-changed",r(this,v,"f")),w(this,v,typeof e=="object"||typeof e=="function"?e:null,"f"),typeof e=="function"&&this.addEventListener("tab-container-changed",e)}get onChanged(){return this.onTabContainerChanged}set onChanged(e){this.onTabContainerChanged=e}get activeTab(){return r(this,i,"a",x)[this.selectedTabIndex]}get activePanel(){return r(this,i,"a",K).assignedNodes()[0]}get vertical(){var e;return((e=r(this,i,"a",A))===null||e===void 0?void 0:e.getAttribute("aria-orientation"))==="vertical"}set vertical(e){const t=r(this,i,"a",A);t&&e?t.setAttribute("aria-orientation","vertical"):t.setAttribute("aria-orientation","horizontal")}connectedCallback(){w(this,_,r(this,_,"f")||(this.attachInternals?this.attachInternals():null),"f");const e=this.shadowRoot||this.attachShadow({mode:"open",slotAssignment:"manual"}),t=document.createElement("slot");t.style.display="flex",t.setAttribute("part","tablist-wrapper"),t.setAttribute("name","tablist-wrapper");const a=document.createElement("div");a.setAttribute("part","tablist-tab-wrapper"),a.setAttribute("name","tablist-tab-wrapper");const s=document.createElement("slot");s.setAttribute("part","tablist"),s.setAttribute("name","tablist"),a.append(s);const c=document.createElement("slot");c.setAttribute("part","panel"),c.setAttribute("name","panel");const o=document.createElement("slot");o.setAttribute("part","before-tabs"),o.setAttribute("name","before-tabs");const l=document.createElement("slot");l.setAttribute("part","after-tabs"),l.setAttribute("name","after-tabs"),t.append(o,a,l);const u=document.createElement("slot");if(u.setAttribute("part","after-panels"),u.setAttribute("name","after-panels"),e.replaceChildren(t,c,u),r(this,_,"f")&&"role"in r(this,_,"f")?r(this,_,"f").role="presentation":this.setAttribute("role","presentation"),this.addEventListener("keydown",this),this.addEventListener("click",this),this.selectTab(-1),!r(this,T,"f")){const h=new MutationObserver(()=>{this.selectTab(-1),r(this,T,"f")&&h.disconnect()});h.observe(this,{childList:!0,subtree:!0})}}attributeChangedCallback(e){!this.isConnected||!this.shadowRoot||e==="vertical"&&(this.vertical=this.hasAttribute("vertical"))}handleEvent(e){if(e.type==="click")return r(this,i,"m",te).call(this,e);if(e.type==="keydown")return r(this,i,"m",ee).call(this,e)}get selectedTabIndex(){return r(this,i,"a",x).findIndex(e=>e.matches("[aria-selected=true]"))}set selectedTabIndex(e){this.selectTab(e)}get defaultTabIndex(){return Number(this.getAttribute("default-tab")||-1)}set defaultTabIndex(e){this.setAttribute("default-tab",String(e))}selectTab(e){var t;if(!r(this,T,"f")){const l=r(this,i,"a",O),u=r(this,i,"a",Q),h=this.querySelector("[role=tablist]"),f=this.querySelector("[slot=tablist-wrapper]");f&&f.closest(this.tagName)===this?C(u,f):h&&h.closest(this.tagName)===this?C(l,h):(r(this,i,"a",R).role="tablist",C(l,...[...this.children].filter(y=>y.matches("[role=tab]"))));const b=r(this,i,"a",A);if(r(this,i,"m",D).call(this,"aria-description",b),r(this,i,"m",D).call(this,"aria-label",b),this.vertical&&r(this,i,"a",A).setAttribute("aria-orientation","vertical"),!(((t=this.querySelector("[slot=tablist-wrapper]"))===null||t===void 0?void 0:t.closest(this.tagName))===this)){const y=[],P=[],j=[];let g=y;for(const p of this.children){if(p.getAttribute("role")==="tab"||p.getAttribute("role")==="tablist"){g=P;continue}if(p.getAttribute("role")==="tabpanel"){g=j;continue}p.getAttribute("slot")==="before-tabs"?y.push(p):p.getAttribute("slot")==="after-tabs"?P.push(p):g.push(p)}C(r(this,i,"a",X),...y),C(r(this,i,"a",Y),...P),C(r(this,i,"a",Z),...j)}const S=this.defaultTabIndex,M=S>=0?S:this.selectedTabIndex;e=e>=0?e:Math.max(0,M)}const a=r(this,i,"a",x),s=Array.from(this.querySelectorAll('[role="tabpanel"]')).filter(l=>l.closest(this.tagName)===this);if(e>a.length-1)return;const c=a[e],o=s[e];if(c&&o&&!(r(this,T,"f")&&!this.dispatchEvent(new z("tab-container-change",{tabIndex:e,bubbles:!0,cancelable:!0,tab:c,panel:o})))){for(const l of a)l.setAttribute("aria-selected","false"),l.setAttribute("tabindex","-1");for(const l of s)!l.hasAttribute("tabindex")&&!l.hasAttribute("data-tab-container-no-tabstop")&&l.setAttribute("tabindex","0");c.setAttribute("aria-selected","true"),c.setAttribute("tabindex","0"),C(r(this,i,"a",K),o),o.hidden=!1,r(this,T,"f")&&(c.focus(),this.dispatchEvent(new z("tab-container-changed",{tabIndex:e,bubbles:!0,tab:c,panel:o}))),w(this,T,!0,"f")}}}E=new WeakMap,v=new WeakMap,T=new WeakMap,_=new WeakMap,i=new WeakSet,A=function(){const e=this.querySelector("[slot=tablist-wrapper]");if(e?.closest(this.tagName)===this)return e.querySelector("[role=tablist]");const t=r(this,i,"a",O);return r(this,i,"a",R).hasAttribute("role")?r(this,i,"a",R):t.assignedNodes()[0]},Q=function(){return this.shadowRoot.querySelector('slot[part="tablist-wrapper"]')},R=function(){return this.shadowRoot.querySelector('div[part="tablist-tab-wrapper"]')},X=function(){return this.shadowRoot.querySelector('slot[part="before-tabs"]')},Y=function(){return this.shadowRoot.querySelector('slot[part="after-tabs"]')},Z=function(){return this.shadowRoot.querySelector('slot[part="after-panels"]')},O=function(){return this.shadowRoot.querySelector('slot[part="tablist"]')},K=function(){return this.shadowRoot.querySelector('slot[part="panel"]')},x=function(){var e;return r(this,i,"a",R).matches("[role=tablist]")?r(this,i,"a",O).assignedNodes():Array.from(((e=r(this,i,"a",A))===null||e===void 0?void 0:e.querySelectorAll('[role="tab"]'))||[]).filter(t=>t instanceof ae&&t.closest(this.tagName)===this)},ee=function(e){var t,a,s;const c=(a=(t=e.target)===null||t===void 0?void 0:t.closest)===null||a===void 0?void 0:a.call(t,'[role="tab"]');if(!c)return;const o=r(this,i,"a",x);if(!o.includes(c))return;const l=this.selectedTabIndex,u=((s=c.closest('[role="tablist"]'))===null||s===void 0?void 0:s.getAttribute("aria-orientation"))==="vertical",h=e.code==="ArrowLeft"||u&&e.code==="ArrowUp";if(e.code==="ArrowRight"||u&&e.code==="ArrowDown"){let b=l+1;b>=o.length&&(b=0),this.selectTab(b)}else if(h){let b=l-1;b<0&&(b=o.length-1),this.selectTab(b)}else e.code==="Home"?(this.selectTab(0),e.preventDefault()):e.code==="End"&&(this.selectTab(o.length-1),e.preventDefault())},te=function(e){var t,a;const s=(a=(t=e.target)===null||t===void 0?void 0:t.closest)===null||a===void 0?void 0:a.call(t,"[role=tab]");if(!s)return;const o=r(this,i,"a",x).indexOf(s);o>=0&&this.selectTab(o)},D=function(e,t){this.hasAttribute(e)&&(t.setAttribute(e,this.getAttribute(e)),this.removeAttribute(e))};H.observedAttributes=["vertical"];const G=typeof globalThis<"u"?globalThis:window;try{G.TabContainerElement=H.define()}catch(n){if(!(G.DOMException&&n instanceof DOMException&&n.name==="NotSupportedError")&&!(n instanceof ReferenceError))throw n}const me="prc-UnderlinePanels-StyledUnderlineWrapper-DusUj",ge={StyledUnderlineWrapper:me},ye=ce(H,"tab-container"),ne=({"aria-label":n,"aria-labelledby":e,children:t,loadingCounters:a,className:s,...c})=>{const[o,l]=d.useState(!0),u=d.useRef(null),h=d.useRef(null),f=oe(c.id),[b,V]=d.useState([]),[S,M]=d.useState([]);d.useEffect(()=>{let g=0,p=0;const I=d.Children.map(t,m=>{if(d.isValidElement(m)&&m.type===N)return d.cloneElement(m,{id:`${f}-tab-${g++}`,loadingCounters:a,iconsVisible:o});if(d.isValidElement(m)&&m.type===U){const ie=m;return d.cloneElement(ie,{"aria-labelledby":`${f}-tab-${p++}`})}return m}),re=d.Children.toArray(I).filter(m=>d.isValidElement(m)&&m.type===N),se=d.Children.toArray(I).filter(m=>d.isValidElement(m)&&m.type===U);V(re),M(se)},[t,f,a,o]);const y=b.some(g=>F.isValidElement(g)&&g.props.icon),[P,j]=d.useState(0);pe(()=>{y&&j(h.current?.getBoundingClientRect().width??0)},[y]),he(g=>{if(!y)return;const p=g[0].contentRect.width;l(p>P)},u,[]);{const g=b.filter(p=>{const I=F.isValidElement(p)&&p.props["aria-selected"];return I===!0||I==="true"});B(g.length<=1,"Only one tab can be selected at a time."),B(b.length===S.length,`The number of tabs and panels must be equal. Counted ${b.length} tabs and ${S.length} panels.`)}return k.jsxs(ye,{children:[k.jsx(be,{ref:u,slot:"tablist-wrapper","data-icons-visible":o,className:le(s,ge.StyledUnderlineWrapper),...c,children:k.jsx(de,{ref:h,"aria-label":n,"aria-labelledby":e,role:"tablist",children:b})}),S]})},N=n=>{const e=J.c(14);let t,a,s;e[0]!==n?({"aria-selected":t,onSelect:a,...s}=n,e[0]=n,e[1]=t,e[2]=a,e[3]=s):(t=e[1],a=e[2],s=e[3]);let c;e[4]!==a?(c=b=>{!b.defaultPrevented&&typeof a=="function"&&a(b)},e[4]=a,e[5]=c):c=e[5];const o=c;let l;e[6]!==a?(l=b=>{(b.key===" "||b.key==="Enter")&&!b.defaultPrevented&&typeof a=="function"&&a(b)},e[6]=a,e[7]=l):l=e[7];const u=l,h=t?0:-1;let f;return e[8]!==t||e[9]!==o||e[10]!==u||e[11]!==s||e[12]!==h?(f=k.jsx(ue,{as:"button",role:"tab",tabIndex:h,"aria-selected":t,type:"button",onClick:o,onKeyDown:u,...s}),e[8]=t,e[9]=o,e[10]=u,e[11]=s,e[12]=h,e[13]=f):f=e[13],f};N.displayName="UnderlinePanels.Tab";const U=n=>{const e=J.c(6);let t,a;e[0]!==n?({children:t,...a}=n,e[0]=n,e[1]=t,e[2]=a):(t=e[1],a=e[2]);let s;return e[3]!==t||e[4]!==a?(s=k.jsx("div",{role:"tabpanel",...a,children:t}),e[3]=t,e[4]=a,e[5]=s):s=e[5],s};U.displayName="UnderlinePanels.Panel";const ve=Object.assign(ne,{Panel:U,Tab:N});ne.__docgenInfo={description:"",methods:[],displayName:"UnderlinePanels",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Tabs (UnderlinePanels.Tab) and panels (UnderlinePanels.Panel) to render"},"aria-label":{required:!1,tsType:{name:"ReactAriaAttributes['aria-label']",raw:"React.AriaAttributes['aria-label']"},description:"Accessible name for the tab list"},"aria-labelledby":{required:!1,tsType:{name:"ReactAriaAttributes['aria-labelledby']",raw:"React.AriaAttributes['aria-labelledby']"},description:"ID of the element containing the name for the tab list"},id:{required:!1,tsType:{name:"string"},description:"Custom string to use when generating the IDs of tabs and `aria-labelledby` for the panels"},loadingCounters:{required:!1,tsType:{name:"boolean"},description:"Loading state for all counters. It displays loading animation for individual counters until all are resolved. It is needed to prevent multiple layout shift."},className:{required:!1,tsType:{name:"string"},description:"Class name for custom styling"},sx:{required:!1,tsType:{name:"union",raw:"BetterCssProperties | SystemStyleObject | CSSCustomProperties | CSSSelectorObject",elements:[{name:"signature",type:"object",raw:`{
  [K in keyof SystemCssProperties]: K extends keyof ColorProps
    ? ThemeColorPaths | SystemCssProperties[K]
    : K extends keyof BorderColorProps
      ? ThemeColorPaths | SystemCssProperties[K]
      : K extends keyof ShadowProps
        ? ThemeShadowPaths | SystemCssProperties[K]
        : SystemCssProperties[K]
}`,signature:{properties:[{key:{name:"SystemCssProperties",required:!0},value:{name:"unknown"}}]}},{name:"SystemStyleObject"},{name:"signature",type:"object",raw:"{\n  [key: `--${string}`]: string | number\n}",signature:{properties:[{key:{name:"literal",value:"`--${string}`"},value:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}],required:!0}}]}},{name:"signature",type:"object",raw:`{
  [cssSelector: string]: SystemStyleObject | CSSCustomProperties
}`,signature:{properties:[{key:{name:"string"},value:{name:"union",raw:"SystemStyleObject | CSSCustomProperties",elements:[{name:"SystemStyleObject"},{name:"signature",type:"object",raw:"{\n  [key: `--${string}`]: string | number\n}",signature:{properties:[{key:{name:"literal",value:"`--${string}`"},value:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}],required:!0}}]}}],required:!0}}]}}]},description:"@deprecated The `sx` prop is deprecated. Replace with a `div` or\nappropriate HTML element instead, with a CSS class for styling.\n@see https://github.com/primer/react/blob/main/contributor-docs/migration-from-box.md"}}};export{ve as U};
