import{R as c}from"./iframe-Cfz2vXeE.js";import{u as l}from"./useProvidedRefOrCreate-Pg3blKRP.js";import{u as f}from"./useResizeObserver-CkcKl7_1.js";import{u as d}from"./useIsomorphicLayoutEffect-C_Bsqbyc.js";import{g}from"./anchored-position-Cz4CQZsC.js";function b(o,h=[]){const n=l(o?.floatingElementRef),r=l(o?.anchorElementRef),u=c.useRef(o?.onPositionChange),[m,a]=c.useState(void 0),[P,s]=c.useState(void 0),p=(e,t)=>e&&["outside-top","inside-top"].includes(e.anchorSide)&&(e.anchorSide!==t.anchorSide||e.top<t.top),R=()=>{let e=!1;return s(t=>(t&&t>(n.current?.clientHeight??0)&&(requestAnimationFrame(()=>{n.current.style.height=`${t}px`}),e=!0),t)),e},i=c.useCallback(()=>{if(n.current instanceof Element&&r.current instanceof Element){const e=g(n.current,r.current,o);a(t=>o?.pinPosition&&p(t,e)&&(r.current?.getBoundingClientRect().top??0)>(n.current?.clientHeight??0)&&R()?t:(t&&t.anchorSide===e.anchorSide&&u.current?.(e),e))}else a(void 0),u.current?.(void 0);s(n.current?.clientHeight)},[n,r,...h]);return d(()=>{u.current=o?.onPositionChange},[o?.onPositionChange]),d(i,[i]),f(i),f(i,n),{floatingElementRef:n,anchorElementRef:r,position:m}}export{b as u};
