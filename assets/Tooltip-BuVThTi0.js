import{r as v,R as P,u as ge,j as h,c as Z}from"./iframe-Cfz2vXeE.js";import{i as me}from"./invariant-Dix8OlSS.js";import{w as be}from"./warning-CmA-h2kW.js";import{V as ye}from"./_VisuallyHidden-CKJB9yD0.js";import{u as we}from"./useSafeTimeout-BD3cO5TN.js";import{u as Ee}from"./useProvidedRefOrCreate-Pg3blKRP.js";import{u as Te,g as Se,K as Ae}from"./KeybindingHint-C2Jv3TM3.js";import{g as Me}from"./anchored-position-Cz4CQZsC.js";function ee(e){if(!e.defaultPrevented){for(const t of Object.values(k).reverse())if(t(e),e.defaultPrevented)break}}const k={};function Le(e,t){k[e]=t}function Pe(e){delete k[e]}let ke=0;const xe=(e,t=[e])=>{const o=v.useCallback(e,t),r=v.useCallback(l=>{l.key==="Escape"&&o(l)},[o]),s=v.useMemo(()=>ke++,[]);v.useEffect(()=>(Object.keys(k).length===0&&document.addEventListener("keydown",ee),Le(s,r),()=>{Pe(s),Object.keys(k).length===0&&document.removeEventListener("keydown",ee)}),[s,r])};var N=class extends Event{oldState;newState;constructor(e,{oldState:t="",newState:o="",...r}={}){super(e,r),this.oldState=String(t||""),this.newState=String(o||"")}},te=new WeakMap;function ae(e,t,o){te.set(e,setTimeout(()=>{te.has(e)&&e.dispatchEvent(new N("toggle",{cancelable:!1,oldState:t,newState:o}))},0))}var G=globalThis.ShadowRoot||function(){},He=globalThis.HTMLDialogElement||function(){},C=new WeakMap,g=new WeakMap,H=new WeakMap;function R(e){return H.get(e)||"hidden"}var I=new WeakMap;function De(e){const t=e.popoverTargetElement;if(!(t instanceof HTMLElement))return;const o=R(t);e.popoverTargetAction==="show"&&o==="showing"||e.popoverTargetAction==="hide"&&o==="hidden"||(o==="showing"?x(t,!0,!0):y(t,!1)&&(I.set(t,e),Y(t)))}function y(e,t){return!(e.popover!=="auto"&&e.popover!=="manual"||!e.isConnected||t&&R(e)!=="showing"||!t&&R(e)!=="hidden"||e instanceof He&&e.hasAttribute("open")||document.fullscreenElement===e)}function oe(e){return e?Array.from(g.get(e.ownerDocument)||[]).indexOf(e)+1:0}function Ce(e){const t=le(e),o=Re(e);return oe(t)>oe(o)?t:o}function O(e){const t=g.get(e);for(const o of t||[])if(!o.isConnected)t.delete(o);else return o;return null}function A(e){return typeof e.getRootNode=="function"?e.getRootNode():e.parentNode?A(e.parentNode):e}function le(e){for(;e;){if(e instanceof HTMLElement&&e.popover==="auto"&&H.get(e)==="showing")return e;if(e=e instanceof Element&&e.assignedSlot||e.parentElement||A(e),e instanceof G&&(e=e.host),e instanceof Document)return}}function Re(e){for(;e;){const t=e.popoverTargetElement;if(t instanceof HTMLElement)return t;if(e=e.parentElement||A(e),e instanceof G&&(e=e.host),e instanceof Document)return}}function Ie(e){const t=new Map;let o=0;for(const l of g.get(e.ownerDocument)||[])t.set(l,o),o+=1;t.set(e,o),o+=1;let r=null;function s(l){const p=le(l);if(p===null)return null;const w=t.get(p);(r===null||t.get(r)<w)&&(r=p)}return s(e.parentElement||A(e)),r}function Oe(e){return e.hidden||e instanceof G||(e instanceof HTMLButtonElement||e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement||e instanceof HTMLOptGroupElement||e instanceof HTMLOptionElement||e instanceof HTMLFieldSetElement)&&e.disabled||e instanceof HTMLInputElement&&e.type==="hidden"||e instanceof HTMLAnchorElement&&e.href===""?!1:typeof e.tabIndex=="number"&&e.tabIndex!==-1}function je(e){if(e.shadowRoot&&e.shadowRoot.delegatesFocus!==!0)return null;let t=e;t.shadowRoot&&(t=t.shadowRoot);let o=t.querySelector("[autofocus]");if(o)return o;{const l=t.querySelectorAll("slot");for(const p of l){const w=p.assignedElements({flatten:!0});for(const n of w){if(n.hasAttribute("autofocus"))return n;if(o=n.querySelector("[autofocus]"),o)return o}}}const r=e.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){if(Oe(s))return s;s=r.nextNode()}}function Ne(e){je(e)?.focus()}var j=new WeakMap;function Y(e){if(!y(e,!1))return;const t=e.ownerDocument;if(!e.dispatchEvent(new N("beforetoggle",{cancelable:!0,oldState:"closed",newState:"open"}))||!y(e,!1))return;let o=!1;if(e.popover==="auto"){const s=e.getAttribute("popover"),l=Ie(e)||t;if(F(l,!1,!0),s!==e.getAttribute("popover")||!y(e,!1))return}O(t)||(o=!0),j.delete(e);const r=t.activeElement;e.classList.add(":popover-open"),H.set(e,"showing"),C.has(t)||C.set(t,new Set),C.get(t).add(e),Ne(e),e.popover==="auto"&&(g.has(t)||g.set(t,new Set),g.get(t).add(e),ue(I.get(e),!0)),o&&r&&e.popover==="auto"&&j.set(e,r),ae(e,"closed","open")}function x(e,t=!1,o=!1){if(!y(e,!0))return;const r=e.ownerDocument;if(e.popover==="auto"&&(F(e,t,o),!y(e,!0))||(ue(I.get(e),!1),I.delete(e),o&&(e.dispatchEvent(new N("beforetoggle",{oldState:"open",newState:"closed"})),!y(e,!0))))return;C.get(r)?.delete(e),g.get(r)?.delete(e),e.classList.remove(":popover-open"),H.set(e,"hidden"),o&&ae(e,"open","closed");const s=j.get(e);s&&(j.delete(e),t&&s.focus())}function ne(e,t=!1,o=!1){let r=O(e);for(;r;)x(r,t,o),r=O(e)}function F(e,t,o){const r=e.ownerDocument||e;if(e instanceof Document)return ne(r,t,o);let s=null,l=!1;for(const p of g.get(r)||[])if(p===e)l=!0;else if(l){s=p;break}if(!l)return ne(r,t,o);for(;s&&R(s)==="showing"&&g.get(r)?.size;)x(s,t,o)}var W=new WeakMap;function re(e){if(!e.isTrusted)return;const t=e.composedPath()[0];if(!t)return;const o=t.ownerDocument;if(!O(o))return;const s=Ce(t);if(s&&e.type==="pointerdown")W.set(o,s);else if(e.type==="pointerup"){const l=W.get(o)===s;W.delete(o),l&&F(s||o,!1,!0)}}var $=new WeakMap;function ue(e,t=!1){if(!e)return;$.has(e)||$.set(e,e.getAttribute("aria-expanded"));const o=e.popoverTargetElement;if(o instanceof HTMLElement&&o.popover==="auto")e.setAttribute("aria-expanded",String(t));else{const r=$.get(e);r?e.setAttribute("aria-expanded",r):e.removeAttribute("aria-expanded")}}var ie=globalThis.ShadowRoot||function(){};function Fe(){return typeof HTMLElement<"u"&&typeof HTMLElement.prototype=="object"&&"popover"in HTMLElement.prototype}function b(e,t,o){const r=e[t];Object.defineProperty(e,t,{value(s){return r.call(this,o(s))}})}var qe=/(^|[^\\]):popover-open\b/g;function Ve(){return typeof globalThis.CSSLayerBlockRule=="function"}function Be(){const e=Ve();return`
${e?"@layer popover-polyfill {":""}
  :where([popover]) {
    position: fixed;
    z-index: 2147483647;
    inset: 0;
    padding: 0.25em;
    width: fit-content;
    height: fit-content;
    border-width: initial;
    border-color: initial;
    border-image: initial;
    border-style: solid;
    background-color: canvas;
    color: canvastext;
    overflow: auto;
    margin: auto;
  }

  :where([popover]:not(.\\:popover-open)) {
    display: none;
  }

  :where(dialog[popover].\\:popover-open) {
    display: block;
  }

  :where(dialog[popover][open]) {
    display: revert;
  }

  :where([anchor].\\:popover-open) {
    inset: auto;
  }

  :where([anchor]:popover-open) {
    inset: auto;
  }

  @supports not (background-color: canvas) {
    :where([popover]) {
      background-color: white;
      color: black;
    }
  }

  @supports (width: -moz-fit-content) {
    :where([popover]) {
      width: -moz-fit-content;
      height: -moz-fit-content;
    }
  }

  @supports not (inset: 0) {
    :where([popover]) {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
  }
${e?"}":""}
`}var S=null;function K(e){const t=Be();if(S===null)try{S=new CSSStyleSheet,S.replaceSync(t)}catch{S=!1}if(S===!1){const o=document.createElement("style");o.textContent=t,e instanceof Document?e.head.prepend(o):e.prepend(o)}else e.adoptedStyleSheets=[S,...e.adoptedStyleSheets]}function We(){if(typeof window>"u")return;window.ToggleEvent=window.ToggleEvent||N;function e(n){return n?.includes(":popover-open")&&(n=n.replace(qe,"$1.\\:popover-open")),n}b(Document.prototype,"querySelector",e),b(Document.prototype,"querySelectorAll",e),b(Element.prototype,"querySelector",e),b(Element.prototype,"querySelectorAll",e),b(Element.prototype,"matches",e),b(Element.prototype,"closest",e),b(DocumentFragment.prototype,"querySelectorAll",e),Object.defineProperties(HTMLElement.prototype,{popover:{enumerable:!0,configurable:!0,get(){if(!this.hasAttribute("popover"))return null;const n=(this.getAttribute("popover")||"").toLowerCase();return n===""||n=="auto"?"auto":"manual"},set(n){n===null?this.removeAttribute("popover"):this.setAttribute("popover",n)}},showPopover:{enumerable:!0,configurable:!0,value(){Y(this)}},hidePopover:{enumerable:!0,configurable:!0,value(){x(this,!0,!0)}},togglePopover:{enumerable:!0,configurable:!0,value(n){H.get(this)==="showing"&&n===void 0||n===!1?x(this,!0,!0):(n===void 0||n===!0)&&Y(this)}}});const t=Element.prototype.attachShadow;t&&Object.defineProperties(Element.prototype,{attachShadow:{enumerable:!0,configurable:!0,writable:!0,value(n){const a=t.call(this,n);return K(a),a}}});const o=HTMLElement.prototype.attachInternals;o&&Object.defineProperties(HTMLElement.prototype,{attachInternals:{enumerable:!0,configurable:!0,writable:!0,value(){const n=o.call(this);return n.shadowRoot&&K(n.shadowRoot),n}}});const r=new WeakMap;function s(n){Object.defineProperties(n.prototype,{popoverTargetElement:{enumerable:!0,configurable:!0,set(a){if(a===null)this.removeAttribute("popovertarget"),r.delete(this);else if(a instanceof Element)this.setAttribute("popovertarget",""),r.set(this,a);else throw new TypeError("popoverTargetElement must be an element or null")},get(){if(this.localName!=="button"&&this.localName!=="input"||this.localName==="input"&&this.type!=="reset"&&this.type!=="image"&&this.type!=="button"||this.disabled||this.form&&this.type==="submit")return null;const a=r.get(this);if(a&&a.isConnected)return a;if(a&&!a.isConnected)return r.delete(this),null;const u=A(this),c=this.getAttribute("popovertarget");return(u instanceof Document||u instanceof ie)&&c&&u.getElementById(c)||null}},popoverTargetAction:{enumerable:!0,configurable:!0,get(){const a=(this.getAttribute("popovertargetaction")||"").toLowerCase();return a==="show"||a==="hide"?a:"toggle"},set(a){this.setAttribute("popovertargetaction",a)}}})}s(HTMLButtonElement),s(HTMLInputElement);const l=n=>{const a=n.composedPath(),u=a[0];if(!(u instanceof Element)||u?.shadowRoot)return;const c=A(u);if(!(c instanceof ie||c instanceof Document))return;const d=a.find(f=>f.matches?.("[popovertargetaction],[popovertarget]"));if(d){De(d),n.preventDefault();return}},p=n=>{const a=n.key,u=n.target;!n.defaultPrevented&&u&&(a==="Escape"||a==="Esc")&&F(u.ownerDocument,!0,!0)};(n=>{n.addEventListener("click",l),n.addEventListener("keydown",p),n.addEventListener("pointerdown",re),n.addEventListener("pointerup",re)})(document),K(document)}const $e="prc-TooltipV2-Tooltip-cYMVY",Ke="prc-TooltipV2-KeybindingHintContainer-iabqv",ze="prc-TooltipV2-HasTextBefore-cCzYC",z={Tooltip:$e,KeybindingHintContainer:Ke,HasTextBefore:ze},se={nw:{side:"outside-top",align:"end"},n:{side:"outside-top",align:"center"},ne:{side:"outside-top",align:"start"},e:{side:"outside-right",align:"center"},se:{side:"outside-bottom",align:"start"},s:{side:"outside-bottom",align:"center"},sw:{side:"outside-bottom",align:"end"},w:{side:"outside-left",align:"center"}},_e={"outside-top-end":"nw","outside-top-center":"n","outside-top-start":"ne","outside-right-center":"e","outside-bottom-start":"se","outside-bottom-center":"s","outside-bottom-end":"sw","outside-left-center":"w"},Ye=["a[href]","button:not([disabled])","summary","select","input:not([type=hidden])","textarea"],Ge={short:50,medium:400,long:1200},_=e=>Ye.some(t=>e.matches(t))||e.hasAttribute("role")&&e.getAttribute("role")==="button",Qe=P.createContext({}),Ue=P.forwardRef(({direction:e="s",text:t,type:o="description",children:r,id:s,className:l,keybindingHint:p,delay:w="short",...n},a)=>{const u=ge(s),c=v.Children.only(r),d=Ee(a),f=v.useRef(null),[ce,pe]=v.useState(e),[Q,q]=v.useState(!1),M=P.useRef(null),{safeSetTimeout:U,safeClearTimeout:fe}=we(),V=()=>{try{if(f.current&&d.current&&f.current.hasAttribute("popover")&&!f.current.matches(":popover-open")){const i=f.current,E=d.current;i.showPopover(),q(!0);const B={side:se[e].side,align:se[e].align},{top:X,left:m,anchorAlign:T,anchorSide:D}=Me(i,E,B),ve=_e[`${D}-${T}`];pe(ve),i.style.top=`${X}px`,i.style.left=`${m}px`}}catch(i){if(!(i&&typeof i=="object"&&"message"in i&&typeof i.message=="string"&&i.message.includes("not a valid selector")))throw i}},L=()=>{M.current&&(fe(M.current),M.current=null);try{f.current&&d.current&&f.current.hasAttribute("popover")&&f.current.matches(":popover-open")&&f.current.hidePopover(),q(!1)}catch(i){if(!(i&&typeof i=="object"&&"message"in i&&typeof i.message=="string"&&i.message.includes("not a valid selector")))throw i}},de=v.useMemo(()=>({tooltipId:u}),[u]);v.useEffect(()=>{if(!f.current||!d.current)return;const i=_(d.current),E=d.current.childNodes,B=Array.from(E).some(m=>m instanceof HTMLElement&&_(m)||Array.from(m.childNodes).some(T=>T instanceof HTMLElement&&_(T)));if(me(i||B,"The `Tooltip` component expects a single React element that contains interactive content. Consider using a `<button>` or equivalent interactive element instead."),o==="label"){const m=d.current.hasAttribute("aria-label"),T=Array.from(d.current.childNodes).some(D=>D instanceof HTMLElement&&D.hasAttribute("aria-label"));be(m||T,"The label type `Tooltip` is going to be used here to label the trigger element. Please remove the aria-label from the trigger element.")}typeof window<"u"&&(Fe()||We()),f.current.setAttribute("popover","auto")},[f,d,e,o]),xe(i=>{Q&&(i.stopImmediatePropagation(),i.preventDefault(),L())},[Q]);const he=Te(),J="aria-label"in n;return h.jsx(Qe.Provider,{value:de,children:h.jsxs(h.Fragment,{children:[P.isValidElement(c)&&P.cloneElement(c,{ref:d,"aria-describedby":(()=>{if(o!=="description")return c.props["aria-describedby"];const i=c.props["aria-describedby"];return i?`${i} ${u}`:u})(),"aria-labelledby":o==="label"?u:c.props["aria-labelledby"],onBlur:i=>{L(),c.props.onBlur?.(i)},onTouchEnd:i=>{c.props.onTouchEnd?.(i),U(()=>L(),10)},onFocus:i=>{try{if(!i.target.matches(":focus-visible"))return}catch{}V(),c.props.onFocus?.(i)},onMouseOverCapture:i=>{const E=Ge[w]||50;M.current=U(()=>{M.current&&(V(),c.props.onMouseEnter?.(i))},E)},onMouseLeave:i=>{L(),c.props.onMouseLeave?.(i)}}),h.jsx("span",{className:Z(l,z.Tooltip),ref:f,"data-direction":ce,...n,role:o==="description"?"tooltip":void 0,"aria-hidden":!0,onMouseEnter:V,onMouseLeave:L,id:J||!p?u:void 0,children:p?h.jsxs(h.Fragment,{children:[h.jsxs("span",{id:J?void 0:u,children:[t,h.jsxs(ye,{children:["(",Se(p,he),")"]})]}),h.jsx("span",{className:Z(z.KeybindingHintContainer,t&&z.HasTextBefore),"aria-hidden":!0,children:h.jsx(Ae,{keys:p,format:"condensed",variant:"onEmphasis",size:"small"})})]}):t})]})})});Ue.__docgenInfo={description:"",methods:[],displayName:"Tooltip",props:{direction:{defaultValue:{value:"'s'",computed:!1},required:!1},type:{defaultValue:{value:"'description'",computed:!1},required:!1},delay:{defaultValue:{value:"'short'",computed:!1},required:!1}}};export{Qe as T,Ue as a,xe as u};
