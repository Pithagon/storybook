import{r as o,R as P,u as ae,b as le,j as i,q as ce,d as de}from"./iframe-Cfz2vXeE.js";import{u as ue}from"./useResizeObserver-CkcKl7_1.js";import{V as H}from"./_VisuallyHidden-CKJB9yD0.js";import{g as me}from"./anchored-position-Cz4CQZsC.js";import{U as fe,a as pe,L as he,G as ge,b as be}from"./UnderlineTabbedInterface-B-g35VdW.js";import{_ as xe}from"./index.esm-C1WN7kEu.js";import{u as Ie}from"./Tooltip-BuVThTi0.js";import{u as ve}from"./useOnOutsideClick-CaQvIa_9.js";import{A as J}from"./index-C-OhZ25x.js";import{i as Q}from"./invariant-Dix8OlSS.js";import{B as Ce}from"./Button-3sCteC9V.js";import{C as ye}from"./CounterLabel-DnnBMwbH.js";import{u as we}from"./useIsomorphicLayoutEffect-C_Bsqbyc.js";const Z=o.createContext({theme:{},setChildrenWidth:()=>null,setNoIconChildrenWidth:()=>null,loadingCounters:!1,iconsVisible:!0}),Re=s=>({display:"inline-block",borderLeft:"1px solid",width:"1px",borderLeftColor:`${s?.colors.border.muted}`,marginRight:"4px",height:"24px"}),ke={margin:0,border:0,background:"transparent",fontWeight:"normal",boxShadow:"none",paddingY:1,paddingX:2,'& > span[data-component="trailingVisual"]':{marginLeft:0}},Ne={"& > span":{display:"none"},textDecoration:"none"},ee=192,F={position:"absolute",zIndex:1,top:"90%",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24)",borderRadius:"12px",backgroundColor:"canvas.overlay",listStyle:"none",minWidth:`${ee}px`,maxWidth:"640px",right:"0"},Me=(s,r)=>{if(s&&r){const{left:e}=me(s,r,{align:"start",side:"outside-bottom"}),{right:f,...l}=F;return{...l,left:e}}return F},We="prc-UnderlineNav-MenuItemContent-k4WNL",je={MenuItemContent:We},Se=86,Te=45,Ue=ce.li`
  display: flex;
  align-items: center;
  height: ${Te}px;
`,Oe=(s,r,e,f,l,c)=>{let d=!0;f.length===0&&c({items:e,menuItems:[]},d);const a=z(f,s),g=z(l,s),u=z(l,s,r||Se),p=[],x=[];if(e.length<=a)p.push(...e);else if(e.length<=g)d=!1,p.push(...e);else{d=!1;const R=e.length-u===1?u-1:u;for(const[m,h]of e.entries())if(m<R)p.push(h);else{const I=h.props["aria-current"];if(!!I&&I!=="false"&&R>0){const M=R-1,k=p.splice(M,1,h)[0];x.push(k)}else x.push(h)}}c({items:p,menuItems:x},d)},Ae=s=>P.Children.toArray(s).filter(r=>P.isValidElement(r)),z=(s,r,e=0)=>{const f=r-e;let l=s.length,c=0;for(const[d,a]of s.entries())if(c=c+a.width+ge,c>f){l=d;break}else continue;return l},G=o.forwardRef(({as:s="nav","aria-label":r,loadingCounters:e=!1,variant:f="inset",className:l,children:c},d)=>{const a=o.useRef(null),g=d??a,u=o.useRef(null),p=o.useRef(null),x=o.useRef(null),w=P.useRef(null),R=ae(),{theme:m}=le(),[h,I]=o.useState(!1),[T,M]=o.useState(!0),[k,U]=o.useState([]),[W,E]=o.useState([]),C=Ae(c),[v,O]=o.useState({items:C,menuItems:[]}),b=v.items.map(t=>C.find(n=>n.key===t.key)??t),N=v.menuItems.map(t=>C.find(n=>n.key===t.key)??t),B=v.items.length===0;o.useEffect(()=>{const t=C.filter(n=>n.props["aria-current"]!==void 0);Q(t.length<=1,"Only one current element is allowed"),Q(r,"Use the `aria-label` prop to provide an accessible label for assistive technology")});function L(t){return W.find(n=>n.text===t)?.width??0}const q=(t,n,y,j)=>{const A=L(t.props.children),V=(g.current?.getBoundingClientRect().width??0)-(u.current?.getBoundingClientRect().width??0),D=te(A,V),S=v.items.length-1-D,oe=[...[...v.items].slice(0,S),t],re=[...v.items].slice(S),Y=[...N];Y.splice(n,1,...re),j({items:oe,menuItems:Y},!1)};function te(t,n){let y=0,j=0;for(const[A,V]of[...v.items].reverse().entries())if(y+=L(V.props.children),t<y+n){j=A;break}return j}const _=o.useCallback((t,n)=>{O(t),M(n)},[]),ne=o.useCallback(t=>{U(n=>[...n,t])},[]),se=o.useCallback(t=>{E(n=>[...n,t])},[]),$=P.useCallback(()=>{I(!1)},[I]),X=P.useCallback(()=>{x.current?.focus()},[]),ie=o.useCallback(t=>{t.defaultPrevented||t.button!==0||I(n=>!n)},[]);return Ie(t=>{h&&(t.preventDefault(),$(),X())},[h]),ve({onClickOutside:$,containerRef:w,ignoreClickRefs:[x]}),ue(t=>{const n=t[0].contentRect.width,y=p.current?.getBoundingClientRect().width??0;n!==0&&Oe(n,y,C,k,W,_)},g),i.jsxs(Z.Provider,{value:{theme:m,setChildrenWidth:ne,setNoIconChildrenWidth:se,loadingCounters:e,iconsVisible:T},children:[r&&i.jsx(H,{as:"h2",children:`${r} navigation`}),i.jsx(fe,{as:s,"aria-label":r,className:l,ref:g,"data-variant":f,children:i.jsxs(pe,{ref:u,role:"list",children:[b,N.length>0&&i.jsxs(Ue,{ref:p,children:[!B&&i.jsx("div",{style:Re(m)}),i.jsx(Ce,{ref:x,sx:ke,"aria-controls":R,"aria-expanded":h,onClick:ie,trailingAction:xe,children:i.jsx("span",{children:B?i.jsxs(i.Fragment,{children:[i.jsxs(H,{as:"span",children:[`${r}`," "]}),"Menu"]}):i.jsxs(i.Fragment,{children:["More",i.jsxs(H,{as:"span",children:[" ",`${r} items`]})]})})}),i.jsx(J,{selectionVariant:"single",ref:w,id:R,sx:u.current?.clientWidth&&u.current.clientWidth>=ee?F:Me(w.current,u.current),style:{display:h?"block":"none"},children:N.map((t,n)=>{const{children:y,counter:j,"aria-current":A,onSelect:V,...D}=t.props;if(A&&A!=="false"){const S=new MouseEvent("click");!B&&q(t,n,S,_)}return i.jsx(J.LinkItem,{sx:Ne,onClick:S=>{!B&&q(t,n,S,_),$(),X(),typeof V=="function"&&V(S)},...D,children:i.jsxs("span",{className:je.MenuItemContent,children:[y,e?i.jsx(he,{}):j!==void 0&&i.jsx("span",{"data-component":"counter",children:i.jsx(ye,{children:j})})]})},y)})})]})]})})]})});G.displayName="UnderlineNav";G.__docgenInfo={description:"",methods:[],displayName:"UnderlineNav",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},"aria-label":{required:!1,tsType:{name:"ReactAriaAttributes['aria-label']",raw:"React.AriaAttributes['aria-label']"},description:""},as:{required:!1,tsType:{name:"ReactElementType",raw:"React.ElementType"},description:"",defaultValue:{value:"'nav'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},loadingCounters:{required:!1,tsType:{name:"boolean"},description:"loading state for all counters. It displays loading animation for individual counters (UnderlineNav.Item) until all are resolved. It is needed to prevent multiple layout shift.",defaultValue:{value:"false",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:"'inset' | 'flush'",elements:[{name:"literal",value:"'inset'"},{name:"literal",value:"'flush'"}]},description:"There are cases where you may not want the horizontal padding on items,\nand panels to make the tabs look horizontally aligned with the content above and below it.\nSetting this to `flush` will remove the horizontal padding on the items.",defaultValue:{value:"'inset'",computed:!1}}}};const Ve="prc-UnderlineNav-UnderlineNavItem--xDk1",Ee={UnderlineNavItem:Ve},K=o.forwardRef((s,r)=>{const e=de.c(31);let f,l,c,d,a,g,u,p;e[0]!==s?({as:u,href:p,children:c,counter:d,onSelect:a,"aria-current":l,icon:f,...g}=s,e[0]=s,e[1]=f,e[2]=l,e[3]=c,e[4]=d,e[5]=a,e[6]=g,e[7]=u,e[8]=p):(f=e[1],l=e[2],c=e[3],d=e[4],a=e[5],g=e[6],u=e[7],p=e[8]);const x=u===void 0?"a":u,w=p===void 0?"#":p,R=o.useRef(null),m=r??R,{setChildrenWidth:h,setNoIconChildrenWidth:I,loadingCounters:T,iconsVisible:M}=o.useContext(Z);let k,U;e[9]!==m||e[10]!==h||e[11]!==I?(k=()=>{if(m.current){const b=m.current.getBoundingClientRect(),N=Array.from(m.current.children).find(Be),L=Array.from(m.current.children).find(Le).textContent,q=N?N.getBoundingClientRect().width+Number(getComputedStyle(N).marginRight.slice(0,-2))+Number(getComputedStyle(N).marginLeft.slice(0,-2)):0;h({text:L,width:b.width}),I({text:L,width:b.width-q})}},U=[m,h,I],e[9]=m,e[10]=h,e[11]=I,e[12]=k,e[13]=U):(k=e[12],U=e[13]),we(k,U);let W;e[14]!==a?(W=b=>{(b.key===" "||b.key==="Enter")&&!b.defaultPrevented&&typeof a=="function"&&a(b)},e[14]=a,e[15]=W):W=e[15];const E=W;let C;e[16]!==a?(C=b=>{!b.defaultPrevented&&typeof a=="function"&&a(b)},e[16]=a,e[17]=C):C=e[17];const v=C;let O;return e[18]!==x||e[19]!==f||e[20]!==l||e[21]!==c||e[22]!==v||e[23]!==d||e[24]!==w||e[25]!==M||e[26]!==E||e[27]!==T||e[28]!==g||e[29]!==m?(O=i.jsx("li",{className:Ee.UnderlineNavItem,children:i.jsx(be,{ref:m,as:x,href:w,"aria-current":l,onKeyDown:E,onClick:v,counter:d,icon:f,loadingCounters:T,iconsVisible:M,...g,children:c})}),e[18]=x,e[19]=f,e[20]=l,e[21]=c,e[22]=v,e[23]=d,e[24]=w,e[25]=M,e[26]=E,e[27]=T,e[28]=g,e[29]=m,e[30]=O):O=e[30],O});K.displayName="UnderlineNavItem";K.__docgenInfo={description:"",methods:[],displayName:"UnderlineNavItem",props:{as:{defaultValue:{value:"'a'",computed:!1},required:!1},href:{defaultValue:{value:"'#'",computed:!1},required:!1}}};function Be(s){return s.getAttribute("data-component")==="icon"}function Le(s){return s.getAttribute("data-component")==="text"}const Ze=Object.assign(G,{Item:K});export{Ze as U,K as a};
