import{R as W,j as a,r as o,c as U,d as K}from"./iframe-Cfz2vXeE.js";import{A as Y}from"./index-C-OhZ25x.js";import{I as ee}from"./IconButton-qXcIkMuV.js";import{K as te}from"./index.esm-C1WN7kEu.js";import{u as se}from"./useResizeObserver-CkcKl7_1.js";import{u as re}from"./Tooltip-BuVThTi0.js";import{u as ne}from"./useOnOutsideClick-CaQvIa_9.js";import{u as ae}from"./useFeatureFlag-paATTdb3.js";import{D as ce}from"./Details-CeoVu8Bo.js";const ie="prc-Breadcrumbs-BreadcrumbsBase-6gqOz",le="prc-Breadcrumbs-BreadcrumbsList-K7eeK",oe="prc-Breadcrumbs-ItemSeparator-nYObp",me="prc-Breadcrumbs-ItemWrapper-Mfwuj",ue="prc-Breadcrumbs-Item-7BKO-",de="prc-Breadcrumbs-BreadcrumbsItem-FHLFr",fe="prc-Breadcrumbs-MenuOverlay-aCOyl",he="prc-Breadcrumbs-MenuDetails-TXUai",p={BreadcrumbsBase:ie,BreadcrumbsList:le,ItemSeparator:oe,ItemWrapper:me,Item:ue,BreadcrumbsItem:de,MenuOverlay:fe,MenuDetails:he},X=c=>{const r=K.c(2),{children:e}=c;let t;return r[0]!==e?(t=a.jsx("ol",{className:p.BreadcrumbsList,children:e}),r[0]=e,r[1]=t):t=r[1],t},Z=W.forwardRef((c,r)=>{const e=K.c(25);let t,l,i;e[0]!==c?({items:l,"aria-label":t,...i}=c,e[0]=c,e[1]=t,e[2]=l,e[3]=i):(t=e[1],l=e[2],i=e[3]);const[f,B]=o.useState(!1),h=o.useRef(null),u=o.useRef(null),d=o.useRef(null);let b;e[4]!==r?(b=s=>{h.current=s,typeof r=="function"&&r(s)},e[4]=r,e[5]=b):b=e[5];const I=b;let _;e[6]===Symbol.for("react.memo_cache_sentinel")?(_=s=>{if(s.preventDefault(),h.current){const n=!h.current.open;h.current.open=n,B(n)}},e[6]=_):_=e[6];const N=_;let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{h.current&&(h.current.open=!1,B(!1))},e[7]=y):y=e[7];const T=y;let E;e[8]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{u.current?.focus()},e[8]=E):E=e[8];const v=E;let R,O;e[9]!==f?(R=s=>{f&&(s.preventDefault(),T(),v())},O=[f],e[9]=f,e[10]=R,e[11]=O):(R=e[10],O=e[11]),re(R,O);let C;e[12]===Symbol.for("react.memo_cache_sentinel")?(C={onClickOutside:T,containerRef:d,ignoreClickRefs:[u]},e[12]=C):C=e[12],ne(C);const $=t||`${l.length} more breadcrumb items`,w=f?"true":"false";let x;e[13]!==i||e[14]!==$||e[15]!==w?(x=a.jsx(ee,{as:"summary",role:"button",ref:u,"aria-label":$,"aria-expanded":w,onClick:N,variant:"invisible",size:"small",icon:te,tooltipDirection:"e",...i}),e[13]=i,e[14]=$,e[15]=w,e[16]=x):x=e[16];let g;e[17]!==l?(g=l.map(be),e[17]=l,e[18]=g):g=e[18];let j;e[19]!==g?(j=a.jsx("div",{ref:d,className:p.MenuOverlay,children:a.jsx(Y,{children:g})}),e[19]=g,e[20]=j):j=e[20];let L;return e[21]!==I||e[22]!==x||e[23]!==j?(L=a.jsxs(ce,{ref:I,className:p.MenuDetails,children:[x,j]}),e[21]=I,e[22]=x,e[23]=j,e[24]=L):L=e[24],L});Z.displayName="Breadcrumbs.MenuItem";const pe=c=>W.Children.toArray(c).filter(r=>W.isValidElement(r));function q({className:c,children:r,style:e,overflow:t="wrap",variant:l="normal"}){const i=ae("primer_react_breadcrumbs_overflow_menu"),f=W.Children.map(r,s=>a.jsx("li",{className:p.ItemWrapper,children:s})),B=o.useRef(null),h=o.useCallback(s=>{if(s){const n=s.querySelector('button[data-component="IconButton"]');if(n){const m=n.offsetWidth;x(m)}}},[]),u=t!=="menu-with-root",[d,b]=o.useState(u),I=o.useMemo(()=>pe(r),[r]),_=I[0],[N,y]=o.useState(()=>I),[T,E]=o.useState(()=>[]),[v,R]=o.useState([]),[O,C]=o.useState(0),$=32,[w,x]=o.useState($);o.useEffect(()=>{const s=B.current?.querySelector("ol");if(i&&s&&s.children.length>0&&s.children.length===I.length){const n=Array.from(s.children),m=n.map(A=>A.offsetWidth);E(m),C(n[0].offsetWidth)}},[I,i]);const g=o.useCallback(s=>{let n=d;const m=w,A=n?4:3,H=S=>{const k=S.reduce((z,Q)=>z+Q+16,0);return n?k:O+k};let M=[...I],D=[...T],V=[],P=[];if(s>0&&D.length>0){let S=H(D);for(V.length>0&&(S+=m);(t==="menu"||t==="menu-with-root")&&(S>s||M.length>A);){const k=M[0],z=D[0];if(V=[...V,k],P=[...P,z],M=M.slice(1),D=D.slice(1),S=H(D),V.length>0&&(S+=m),M.length===1&&S>s){n=!0;break}else n=u}}return{visibleItems:M,menuItems:V,effectiveHideRoot:n}},[I,T,d,u,t,O,w]),j=o.useCallback(s=>{if(i&&s[0]){const n=s[0].contentRect.width,m=g(n);(N.length!==m.visibleItems.length&&v.length!==m.menuItems.length||m.effectiveHideRoot!==d)&&(y(m.visibleItems),R(m.menuItems),b(m.effectiveHideRoot))}},[g,d,v.length,i,N.length]);se(j,B),o.useEffect(()=>{if(i&&(t==="menu"||t==="menu-with-root")&&I.length>5&&v.length===0){const s=B.current?.offsetWidth||800,n=g(s);y(n.visibleItems),R(n.menuItems),b(n.effectiveHideRoot)}},[t,I,g,v.length,i]);const L=W.useMemo(()=>{if(i){if(t==="wrap"||v.length===0)return W.Children.map(r,H=>a.jsx("li",{className:p.ItemWrapper,children:H}));let s=[...v];d||(s=[...v.slice(1)]);const n=a.jsxs("li",{className:p.BreadcrumbsItem,children:[a.jsx(Z,{ref:h,items:s,"aria-label":`${s.length} more breadcrumb items`}),a.jsx(F,{})]},"breadcrumbs-menu"),m=N.map((H,M)=>a.jsxs("li",{className:p.BreadcrumbsItem,children:[H,a.jsx(F,{})]},`visible + ${M}`)),A=a.jsxs("li",{className:p.BreadcrumbsItem,children:[_,a.jsx(F,{})]},"rootElement");return d?[n,...m]:[A,n,...m]}},[i,t,v,d,h,N,_,r]);return i?a.jsx("nav",{className:U(c,p.BreadcrumbsBase),"aria-label":"Breadcrumbs",style:e,ref:B,"data-overflow":t,"data-variant":l,children:a.jsx(X,{children:L})}):a.jsx("nav",{className:U(c,p.BreadcrumbsBase),"aria-label":"Breadcrumbs",style:e,"data-variant":l,children:a.jsx(X,{children:f})})}const F=()=>{const c=K.c(1);let r;return c[0]===Symbol.for("react.memo_cache_sentinel")?(r=a.jsx("span",{className:p.ItemSeparator,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:a.jsx("path",{d:"M10.956 1.27994L6.06418 14.7201L5 14.7201L9.89181 1.27994L10.956 1.27994Z",fill:"currentcolor"})})}),c[0]=r):r=c[0],r};function G(c,r){const e=K.c(14);let t,l,i,f;e[0]!==c?({as:f,selected:i,className:t,...l}=c,e[0]=c,e[1]=t,e[2]=l,e[3]=i,e[4]=f):(t=e[1],l=e[2],i=e[3],f=e[4]);const B=f===void 0?"a":f,h=i&&"selected";let u;e[5]!==t||e[6]!==h?(u=U(t,p.Item,h),e[5]=t,e[6]=h,e[7]=u):u=e[7];const d=i?"page":void 0;let b;return e[8]!==B||e[9]!==r||e[10]!==l||e[11]!==u||e[12]!==d?(b=a.jsx(B,{className:u,"aria-current":d,ref:r,...l}),e[8]=B,e[9]=r,e[10]=l,e[11]=u,e[12]=d,e[13]=b):b=e[13],b}G.displayName="Breadcrumbs.Item";const J=W.forwardRef(G);q.displayName="Breadcrumbs";const Re=Object.assign(q,{Item:J});Object.assign(q,{Item:J});q.__docgenInfo={description:"",methods:[],displayName:"Breadcrumbs",props:{overflow:{defaultValue:{value:"'wrap'",computed:!1},required:!1},variant:{defaultValue:{value:"'normal'",computed:!1},required:!1}}};function be(c,r){const e=c.props.href,t=c.props.children,l=c.props.selected;return a.jsx(Y.LinkItem,{href:e,"aria-current":l?"page":void 0,className:p.MenuItem,children:t},r)}export{Re as B};
